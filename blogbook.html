<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog Feed to Book - Posts Output</title>
    <!-- <base target="_blank" /> -->
    <link rel="stylesheet" href="index.css" />
    <!-- <script>
      function myFunc() {
        alert("myFunc() called");
      }
    </script> -->
  </head>
  <!-- <body onload="myFunc()"> -->
  <body>
    <p>
      <a href="howtosaveblogbook.html" target="_blank"
        >How to save generated blog book?</a
      >
    </p>
    <main id="main">
      <h2>Blog Book Placeholder</h2>
      <p>
        This page is used by "Barebones Blogger Blog Feed to HTML Book" page to
        dynamically load blog books. These contents are a placeholder while the
        blog book is getting loaded.
      </p>
      <p>
        Note that small blog books may take a second or few seconds to load.
        Larger blog books may take longer to load.
      </p>
      <p>
        Note that this window is supposed to be automatically opened by
        "Barebones Blogger Blog Feed to HTML Book". If you have come to this
        page directly or you have refreshed the page, then the blog book will
        not be created here and you may please close the window.
      </p>
    </main>
    <script>
      // External links should be opened in new tab/window as otherwise dynamic HTML
      // of this tab/window will be lost.
      // But internal links should be opened in this tab/window.
      document.body.addEventListener("click", function (e) {
        if (e.target && e.target.nodeName == "A") {
          const linkhref = e.target.href;
          const docURL = document.URL;
          let docURLBase = docURL;
          const hashCharIndex = docURL.indexOf("#");
          if (hashCharIndex === 0) {
            console.log("Unexpected positon of # char as 0 in document URL");
          } else if (hashCharIndex > 0) {
            docURLBase = docURL.substring(0, hashCharIndex);
          }
          if (!linkhref.includes(docURLBase)) {
            e.target.target = "_blank";
          }
        }
      });
    </script>
  </body>
</html>
